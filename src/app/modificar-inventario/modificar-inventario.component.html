<div class="container mt-4">
    <h4 class="text-center text-primary">Modificar Inventario</h4>
  
    <!-- Barra de búsqueda -->
    <div class="mb-3">
      <input type="text" class="form-control" placeholder="Buscar producto" [(ngModel)]="terminoBusqueda">
      <button class="btn btn-primary mt-2" (click)="buscarProducto()">Buscar</button>
    </div>

    <!-- Mostrar lista completa de productos -->
  <!-- <ul class="list-group">
    <li 
      *ngFor="let producto of productos" 
      (click)="seleccionarProducto(producto)" 
      class="list-group-item d-flex justify-content-between align-items-center" 
      [class.active]="producto === productoSeleccionado"
      style="cursor: pointer;">
      <span>{{ producto.tipoProducto }}</span>
      <span>{{ producto.precio | currency:'EUR' }}</span>
      <span>{{ producto.cantidadProducto }}</span>
    </li>
  </ul>  -->

  <app-productos [mostrarUltimaColumna]="false" [productoSeleccionadoExternamente]="productoSeleccionado" (productoSeleccionadoEvent)="onProductoSeleccionado($event)"></app-productos>
  
    <!-- Mostrar el producto encontrado -->
    <div *ngIf="productoSeleccionado" class="mt-3">
      <h5>Producto seleccionado: {{ productoSeleccionado.tipoProducto }}</h5>
      <p>Unidades actuales: {{ productoSeleccionado.cantidadProducto }}</p>
  
      <!-- Formulario para modificar unidades -->
      <div class="d-flex justify-content-between align-items-center">
        <input type="number" [(ngModel)]="cantidadModificar" class="form-control w-50" placeholder="Cantidad a modificar" min="1" step="1" (input)="validarCantidad()" required>
        <button class="btn btn-success ms-2" (click)="modificarCantidad(cantidadModificar)">Añadir</button>
        <button class="btn btn-danger ms-2" (click)="modificarCantidad(-cantidadModificar)">Eliminar</button>
      </div>
      <!-- Nueva sección para modificar tipo de producto y precio -->
      <div class="mt-3">
        <h5>Modificar tipo y precio</h5>
        <div class="d-flex justify-content-between align-items-center">
          <input type="text" [(ngModel)]="productoSeleccionado.tipoProducto" class="form-control w-50" placeholder="Nuevo tipo de producto">
          <input type="number" [(ngModel)]="productoSeleccionado.precio" class="form-control w-50 ms-2" placeholder="Nuevo precio" min="0" step="0.01">
          <button class="btn btn-primary ms-2" (click)="modificarProducto()">Guardar Cambios</button>
        </div>
      </div>

    <!-- Botón de eliminar producto con confirmación -->
      <div class="text-center mt-3">
        <button class="btn btn-lg btn-danger" (click)="confirmarEliminacion = true">Eliminar Producto</button>
      </div>

    <!-- Ventana emergente de confirmación -->
      <div *ngIf="confirmarEliminacion" class="confirm-overlay">
        <div class="confirm-box bg-white p-4 border rounded">
          <p>¿Está seguro de que desea eliminar el producto?</p>
          <button class="btn btn-danger me-2" (click)="eliminarProducto()">Sí</button>
          <button class="btn btn-secondary" (click)="confirmarEliminacion = false">No</button>
        </div>
      </div>
    </div>
  </div>
  
